I"~<meta name="referrer" content="no-referrer" />

<h2 id="0-å‰è¨€">0. å‰è¨€</h2>

<p>å—¯ï¼Œå¯èƒ½ä¸€è¿›æ¥å¤§éƒ¨åˆ†äººéƒ½ä¼šè§‰å¾—ï¼Œä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰äººé‡å¤é€ è½®å­ï¼ŒGitHubç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯éƒ½å·²ç»çƒ‚å¤§è¡—å•¦ã€‚ç¡®å®ï¼Œä¸€å¼€å§‹æˆ‘è‡ªå·±ä¹Ÿæ˜¯è¿™ä¹ˆè§‰å¾—çš„ï¼Œä¹Ÿé—®è¿‡è‡ªå·±æ˜¯å¦çœŸçš„æœ‰æ„ä¹‰å†å»åšè¿™æ ·ä¸€ä¸ªé¡¹ç›®ã€‚æ€è€ƒå†ä¸‰ï¼Œä»¥ä¸‹åŸå› ä¹Ÿå†³å®šäº†æˆ‘æ„¿æ„å»åšä¸€ä¸ªè®©è‡ªå·±æ»¡æ„çš„GitHubç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯ã€‚</p>

<ul>
  <li>
    <p>å¯¹äºæ—¶å¸¸å…³æ³¨GitHub Trendingåˆ—è¡¨çš„ç¬”è€…æ¥è¯´ï¼Œè¿«åˆ‡éœ€è¦ä¸€ä¸ªæ›´ç®€å•çš„æ–¹å¼éšæ—¶éšåœ°å»è·ŸéšGitHubæœ€æ–°çš„æŠ€æœ¯æ½®æµï¼›</p>
  </li>
  <li>
    <p>å·²æœ‰çš„ä¸€äº›GitHubå°ç¨‹åºå®¢æˆ·ç«¯é¢œå€¼ä¸åŠŸèƒ½å¹¶ä¸èƒ½æ»¡è¶³ç¬”è€…çš„è¦æ±‚ï¼›</p>
  </li>
  <li>
    <p>å¬è¯´iOSå¼€å‘æ²¡äººè¦äº†ï¼ŒæŒæ¡ä¸€é—¨æ–°çš„å¼€å‘æŠ€èƒ½ï¼Œåˆä½•å°ä¸å¯ï¼Ÿ</p>
  </li>
  <li>
    <p>å…¶å®ä¹Ÿæ²¡é‚£ä¹ˆå¤šåŸå› ï¼Œæ—¢ç„¶æƒ³åšï¼Œé‚£å°±å»åšï¼Œå¼€å¿ƒæœ€é‡è¦ã€‚</p>
  </li>
</ul>

<!--more-->

<h1 id="1-gitter">1. Gitter</h1>

<p><img src="https://user-gold-cdn.xitu.io/2019/1/26/1688aa356ae167c9?w=258&amp;h=258&amp;f=png&amp;s=34736" alt="code" /></p>

<ul>
  <li>
    <p>GitHubï¼š<a href="https://github.com/huangjianke/Gitter">https://github.com/huangjianke/Gitter</a>ï¼Œå¯èƒ½æ˜¯ç›®å‰é¢œå€¼æœ€é«˜çš„GitHubå°ç¨‹åºå®¢æˆ·ç«¯ï¼Œæ¬¢è¿star</p>
  </li>
  <li>
    <p>æ•°æ®æ¥æºï¼š<a href="https://developer.github.com/v3/">GitHub API v3</a></p>
  </li>
</ul>

<p>ç›®å‰å®ç°çš„åŠŸèƒ½æœ‰ï¼š</p>

<ul>
  <li>
    <p>å®æ—¶æŸ¥çœ‹Trending</p>
  </li>
  <li>
    <p>æ˜¾ç¤ºç”¨æˆ·åˆ—è¡¨</p>
  </li>
  <li>
    <p>ä»“åº“å’Œç”¨æˆ·çš„æœç´¢</p>
  </li>
  <li>
    <p>ä»“åº“ï¼šè¯¦æƒ…å±•ç¤ºã€README.mdå±•ç¤ºã€Star/Unstarã€Forkã€Contributorså±•ç¤ºã€æŸ¥çœ‹ä»“åº“æ–‡ä»¶å†…å®¹</p>
  </li>
  <li>
    <p>å¼€å‘è€…ï¼šFollow/Unfollowã€æ˜¾ç¤ºç”¨æˆ·çš„followers/following</p>
  </li>
  <li>
    <p>Issueï¼šæŸ¥çœ‹issueåˆ—è¡¨ã€æ–°å¢issueã€æ–°å¢issueè¯„è®º</p>
  </li>
  <li>
    <p>åˆ†äº«ä»“åº“ã€å¼€å‘è€…</p>
  </li>
  <li>
    <p>â€¦</p>
  </li>
</ul>

<p>Gitterçš„åˆè¡·å¹¶ä¸æ˜¯æƒ³æŠŠç½‘é¡µç«¯æ‰€æœ‰åŠŸèƒ½ç…§æ¬åˆ°å°ç¨‹åºä¸Šï¼Œå› ä¸ºé‚£æ ·çš„ä½“éªŒå¹¶ä¸ä¼šå¾ˆå‹å¥½ï¼Œæ¯”å¦‚è¯´ï¼Œç¬”è€…è‡ªå·±ä¹Ÿä¸æƒ³åœ¨æ‰‹æœºä¸Šé˜…è¯»ä»£ç ï¼Œé‚£å°†ä¼šæ˜¯ä¸€ä»¶å¾ˆç—›è‹¦çš„äº‹ã€‚</p>

<p>åœ¨ä¿è¯ç”¨æˆ·ä½“éªŒçš„å‰æä¸‹ï¼Œè®©ç”¨æˆ·ç”¨æ›´ç®€å•çš„æ–¹å¼å¾—åˆ°è‡ªå·±æƒ³è¦çš„ï¼Œè¿™æ˜¯ä¸€ä»¶æœ‰è¶£çš„äº‹ã€‚</p>

<h1 id="2-æ¢ç´¢ç¯‡">2. æ¢ç´¢ç¯‡</h1>

<h2 id="æŠ€æœ¯é€‰å‹">æŠ€æœ¯é€‰å‹</h2>

<p>ç¬¬ä¸€æ¬¡è§‰å¾—ï¼Œåœ¨èŒ«èŒ«å‰ç«¯çš„ä¸–ç•Œé‡Œï¼Œè‡ªå·±æ˜¯é‚£ä¹ˆæ¸ºå°ã€‚</p>

<p>å½“å†³å®šå»åšè¿™ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œå°±å¼€å§‹äº†é©¬ä¸åœè¹„çš„æŠ€æœ¯é€‰å‹ï¼Œä½†æ‘†åœ¨è‡ªå·±é¢å‰çš„é€‰æ‹©æ˜¯é‚£ä¹ˆçš„å¤šï¼Œä¹Ÿä¸å¾—ä¸æ„Ÿæ…¨ï¼Œå‰ç«¯çš„ä¸–ç•Œï¼ŒçœŸçš„å¾ˆç²¾å½©ã€‚</p>

<ul>
  <li>
    <p>åŸç”Ÿå¼€å‘ï¼šåŸºæœ¬ä¸Šä¸€å¼€å§‹å°±æ”¾å¼ƒäº†ï¼Œå¼€å‘ä½“éªŒå¾ˆä¸å‹å¥½ï¼›</p>
  </li>
  <li>
    <p><a href="https://tencent.github.io/wepy/">WePY</a>ï¼šä¹‹å‰ç”¨è¿™ä¸ªæ¡†æ¶å·²ç»å¼€å‘è¿‡ä¸€ä¸ªå°ç¨‹åºï¼Œ<a href="https://github.com/huangjianke/weapp-poem">è¯—è¯å¢¨å®¢</a>ï¼Œä¸å¾—ä¸è¯´ï¼Œå‘æ˜¯çœŸå¤šï¼Œç”¨è¿‡çš„éƒ½çŸ¥é“ï¼›</p>
  </li>
  <li>
    <p><a href="http://mpvue.com/">mpvue</a>ï¼šç”¨Vueçš„æ–¹å¼å»å¼€å‘å°ç¨‹åºï¼Œä¸ªäººè§‰å¾—æ–‡æ¡£å¹¶ä¸æ˜¯å¾ˆé½å…¨ï¼ŒåŠ ä¸Šè¿‘æœŸç»´æŠ¤æ¯”è¾ƒå°‘ï¼Œå¯èƒ½æ˜¯è¶‹äºç¨³å®šäº†ï¼Ÿ</p>
  </li>
  <li>
    <p><a href="https://taro.aotu.io/">Taro</a>ï¼šç”¨Reactçš„æ–¹å¼å»å¼€å‘å°ç¨‹åºï¼ŒTaroå›¢é˜Ÿçš„å°ä¼™ä¼´ç»´æŠ¤çœŸçš„å¾ˆå‹¤å¿«ï¼Œä¹Ÿå¾ˆè€å¿ƒçš„è§£ç­”å¤§å®¶ç–‘é—®ï¼Œæ–‡æ¡£ä¹Ÿæ¯”è¾ƒé½å…¨ï¼Œå¼€å‘ä½“éªŒä¹Ÿå¾ˆæ£’ï¼Œè¿˜å¯ä»¥ä¸€é”®ç”Ÿæˆå¤šç«¯è¿è¡Œçš„ä»£ç (æš‚æ²¡å°è¯•)</p>
  </li>
</ul>

<p>è´§æ¯”ä¸‰å®¶ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´çš„å°è¯•åŠè¸©å‘ï¼Œç»¼åˆè‡ªå·±ç›®å‰çš„èƒ½åŠ›ï¼Œæœ€ç»ˆç¡®å®šäº†Gitterçš„æŠ€æœ¯é€‰å‹ï¼š</p>

<p><a href="https://taro.aotu.io/">Taro</a>Â +Â <a href="https://taro-ui.aotu.io/#/docs/introduction">Taro UI</a>Â + Redux + äº‘å¼€å‘ Node.js</p>

<h2 id="é¡µé¢è®¾è®¡">é¡µé¢è®¾è®¡</h2>

<p>å…¶å®ï¼Œä½œä¸ºä¸€åCoderï¼Œæ›¾ç»ä¸€ç›´æƒ³æ‰¾ä¸ªUIè®¾è®¡å¸ˆå¦¹å­åšè€å©†çš„(è‚¯å®šæœ‰å’Œæˆ‘ä¸€æ ·æƒ³æ³•çš„Coder)ï¼Œå¤šæ­é…å•Šã€‚ç°åœ¨æƒ³æƒ³ï¼Œcodeä¸æ˜¯ç”Ÿæ´»çš„å…¨éƒ¨ï¼Œç°åœ¨çš„æˆ‘ä¸€æ ·å¾ˆå¹¸ç¦ã€‚</p>

<p>è¯å›æ­£é¢˜ï¼Œæ²¡æœ‰è®¾è®¡å¸ˆè€å©†é¡µé¢è®¾è®¡æ€ä¹ˆåŠï¼Ÿæ¯•ç«Ÿç¬”è€…æƒ³è¦çš„æ˜¯ä¸€æ¬¾é«˜é¢œå€¼çš„GitHubå°ç¨‹åºã€‚</p>

<p>å—¯ï¼Œä¸æ…Œï¼Œé»˜é»˜çš„æ‹¿å‡ºäº†ç¬”è€…æ²‰å¯‚å·²ä¹…çš„Photoshopå’ŒSketchã€‚ä¸æ•¢è¯´è‡ªå·±çš„è®¾è®¡èƒ½åŠ›å¦‚ä½•ï¼ŒGitterçš„è®¾è®¡è‡³å°‘æ˜¯èƒ½è®©ç¬”è€…è‡ªå·±å¿ƒæƒ…æ„‰æ‚¦çš„ï¼Œå€˜è‹¥å“ªä½è®¾è®¡çˆ±å¥½è€…æƒ³å¯¹Gitterçš„è®¾è®¡è¿›è¡Œæ”¹è‰¯ï¼Œæ¬¢è¿æ¬¢è¿ï¼ŒåäºŒåˆ†çš„æ¬¢è¿ï¼</p>

<h1 id="3-å¼€å‘ç¯‡">3. å¼€å‘ç¯‡</h1>

<blockquote>
  <p>Talk is cheap. Show me the code.</p>
</blockquote>

<p>ä½œä¸ºä¸€ç¯‡æŠ€æœ¯æ€§æ–‡ç« ï¼Œæ€å¯èƒ½å°‘å¾—äº†ä»£ç ã€‚</p>

<p>åœ¨è¿™é‡Œä¸»è¦å†™å†™å‡ ä¸ªè¸©å‘ç‚¹ï¼Œä½œä¸ºä¸€ä¸ªå‰ç«¯å°ç™½ï¼Œç›¸ä¿¡å„ä½è¯»è€…å‡æ˜¯ç¬”è€…çš„å‰è¾ˆï¼Œè¿˜æœ›å¤šå¤šæŒ‡æ•™ï¼</p>

<h2 id="trending">Trending</h2>

<p>è¿›å…¥å¼€å‘é˜¶æ®µæ²¡å¤šä¹…ï¼Œå°±é‡åˆ°äº†ç¬¬ä¸€ä¸ªå‘ã€‚<strong>GitHubå±…ç„¶æ²¡æœ‰æä¾›Trendingåˆ—è¡¨çš„APIï¼ï¼ï¼</strong></p>

<p>ä¹Ÿæ²¡æœ‰è¿‡å¤šçš„å»æƒ³GitHubä¸ºä»€ä¹ˆä¸æä¾›è¿™ä¸ªAPIï¼Œåªæƒ³ç€æ€ä¹ˆå»å°½å¿«å¡«å¥½è¿™ä¸ªå‘ã€‚ä¸€å¼€å§‹å°è¯•ä½¿ç”¨<a href="https://scrapy.org/">Scrapy</a>å†™ä¸€ä¸ªçˆ¬è™«å¯¹ç½‘é¡µç«¯çš„Trendingåˆ—è¡¨ä¿¡æ¯è¿›è¡Œå®šæ—¶çˆ¬å–åŠå­˜å‚¨ä¾›å°ç¨‹åºç«¯ä½¿ç”¨ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯æ”¾å¼ƒäº†è¿™ä¸ªåšæ³•ï¼Œå› ä¸ºç¬”è€…å¹¶æ²¡æœ‰æœåŠ¡å™¨ä¸å·²ç»å¤‡æ¡ˆå¥½çš„åŸŸåï¼Œå°ç¨‹åºçš„äº‘å¼€å‘ä¹Ÿåªæ”¯æŒNode.jsçš„éƒ¨ç½²ã€‚</p>

<p>å¼€æºçš„åŠ›é‡è¿˜æ˜¯å¼ºå¤§ï¼Œæœ€ç»ˆæ‰¾åˆ°äº†<a href="https://github.com/huchenme/github-trending-api">github-trending-api</a>ï¼Œç¨ä½œä¿®æ”¹ï¼ŒæˆåŠŸéƒ¨ç½²åˆ°å°ç¨‹åºäº‘å¼€å‘åå°ï¼Œåœ¨æ­¤ï¼Œæ„Ÿè°¢åŸä½œè€…çš„åŠªåŠ›ã€‚</p>

<ul>
  <li>Trendingåˆ—è¡¨äº‘å‡½æ•°</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td> --><td class="rouge-code"><pre><span class="c1">// äº‘å‡½æ•°å…¥å£å‡½æ•°</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">main</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">language</span><span class="p">,</span> <span class="nx">since</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">event</span>
  <span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="kd">let</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()</span>
  <span class="kd">const</span> <span class="nx">cacheKey</span> <span class="o">=</span> <span class="s2">`repositories::</span><span class="p">${</span><span class="nx">language</span> <span class="o">||</span> <span class="dl">'</span><span class="s1">nolang</span><span class="dl">'</span><span class="p">}</span><span class="s2">::</span><span class="p">${</span><span class="nx">since</span> <span class="o">||</span>
  <span class="dl">'</span><span class="s1">daily</span><span class="dl">'</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">cacheData</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">repositories</span><span class="dl">'</span><span class="p">).</span><span class="nx">where</span><span class="p">({</span>
    <span class="na">cacheKey</span><span class="p">:</span> <span class="nx">cacheKey</span>
  <span class="p">}).</span><span class="nx">orderBy</span><span class="p">(</span><span class="dl">'</span><span class="s1">cacheDate</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">desc</span><span class="dl">'</span><span class="p">).</span><span class="kd">get</span><span class="p">()</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">cacheData</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span> <span class="o">!==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span>
    <span class="p">((</span><span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="nx">cacheData</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">cacheDate</span><span class="p">)</span>  <span class="o">&lt;</span> <span class="mi">1800</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">res</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">cacheData</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">content</span><span class="p">)</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetchRepositories</span><span class="p">({</span> <span class="nx">language</span><span class="p">,</span> <span class="nx">since</span> <span class="p">});</span>
    <span class="k">await</span> <span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="p">(</span><span class="dl">'</span><span class="s1">repositories</span><span class="dl">'</span><span class="p">).</span><span class="nx">add</span><span class="p">({</span>
      <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">cacheDate</span><span class="p">:</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">(),</span>
        <span class="na">cacheKey</span><span class="p">:</span> <span class="nx">cacheKey</span><span class="p">,</span>
        <span class="na">content</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">})</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">data</span><span class="p">:</span> <span class="nx">res</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="markdownè§£æ">Markdownè§£æ</h2>

<p>å—¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤§å‘ã€‚</p>

<p>åœ¨åšæŠ€æœ¯è°ƒç ”çš„æ—¶å€™ï¼Œå‘ç°å°ç¨‹åºç«¯Markdownè§£æä¸»è¦æœ‰ä»¥ä¸‹æ–¹æ¡ˆï¼š</p>

<ul>
  <li>
    <p><a href="https://github.com/icindy/wxParse">wxParse</a>ï¼šä½œè€…æœ€åä¸€æ¬¡æäº¤å·²æ˜¯ä¸¤å¹´å‰äº†ï¼Œç»è¿‡è‡ªå·±çš„å°è¯•ï¼Œä¹Ÿç¡®å®å‘ç°å·²ç»ä¸é€‚åˆå¦‚README.mdçš„è§£æ</p>
  </li>
  <li>
    <p><a href="https://github.com/TooBug/wemark">wemark</a>ï¼šä¸€æ¬¾å¾ˆä¼˜ç§€çš„å¾®ä¿¡å°ç¨‹åºMarkdownæ¸²æŸ“åº“ï¼Œä½†ç»è¿‡ç¬”è€…å°è¯•ä¹‹åï¼Œå‘ç°å¯¹README.mdçš„è§£æå¹¶ä¸å®Œç¾</p>
  </li>
  <li>
    <p><a href="https://github.com/sbfkcel/towxml">towxml</a>ï¼šç›®å‰å‘ç°æ˜¯å¾®ä¿¡å°ç¨‹åºæœ€å®Œç¾çš„Markdownæ¸²æŸ“åº“ï¼Œå·²ç»èƒ½è¿‘ä¹å®Œç¾çš„å¯¹README.mdè¿›è¡Œè§£æå¹¶å±•ç¤º</p>
  </li>
</ul>

<p>åœ¨Markdownè§£æè¿™ä¸€å—ï¼Œæœ€ç»ˆé‡‡ç”¨çš„ä¹Ÿæ˜¯towxmlï¼Œä½†å‘ç°åœ¨è§£ææ€§èƒ½è¿™ä¸€å—ï¼Œç›®å‰å¹¶ä¸æ˜¯å¾ˆä¼˜ç§€ï¼Œå¯¹ä¸€äº›æ¯”è¾ƒå¤§çš„æ•°æ®è§£æä¹Ÿè¶…å‡ºäº†å°ç¨‹åºæ‰€èƒ½æ‰¿å—çš„èŒƒå›´ï¼Œè¿˜å¥½è´´å¿ƒçš„ä½œè€…(<a href="https://github.com/sbfkcel">sbfkcel</a>)æä¾›äº†æœåŠ¡ç«¯çš„æ”¯æŒï¼Œåœ¨æ­¤æ„Ÿè°¢ä½œè€…çš„åŠªåŠ›ï¼</p>

<ul>
  <li>Markdownè§£æäº‘å‡½æ•°</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td> --><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">Towxml</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">towxml</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">towxml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Towxml</span><span class="p">();</span>
<span class="c1">// äº‘å‡½æ•°å…¥å£å‡½æ•°</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">main</span> <span class="o">=</span> <span class="k">async</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">func</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">content</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">event</span>
  <span class="kd">let</span> <span class="nx">res</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">func</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">parse</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="dl">'</span><span class="s1">markdown</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">towxml</span><span class="p">.</span><span class="nx">toJson</span><span class="p">(</span><span class="nx">content</span> <span class="o">||</span> <span class="dl">''</span><span class="p">,</span> <span class="dl">'</span><span class="s1">markdown</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">towxml</span><span class="p">.</span><span class="nx">toJson</span><span class="p">(</span><span class="nx">content</span> <span class="o">||</span> <span class="dl">''</span><span class="p">,</span> <span class="dl">'</span><span class="s1">html</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">data</span><span class="p">:</span> <span class="nx">res</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>markdown.jsç»„ä»¶</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td> --><td class="rouge-code"><pre><span class="c1">// äº‘å‡½æ•°è§£æmarkdown</span>
<span class="nx">parseReadme</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">md</span><span class="p">,</span> <span class="nx">base</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span>
  <span class="kd">let</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span>
  <span class="nx">wx</span><span class="p">.</span><span class="nx">cloud</span><span class="p">.</span><span class="nx">callFunction</span><span class="p">({</span>
    <span class="c1">// è¦è°ƒç”¨çš„äº‘å‡½æ•°åç§°</span>
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">parse</span><span class="dl">'</span><span class="p">,</span>
    <span class="c1">// ä¼ é€’ç»™äº‘å‡½æ•°çš„eventå‚æ•°</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">func</span><span class="p">:</span> <span class="dl">'</span><span class="s1">parse</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">markdown</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">content</span><span class="p">:</span> <span class="nx">md</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">data</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">base</span> <span class="o">&amp;&amp;</span> <span class="nx">base</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="nx">render</span><span class="p">.</span><span class="nx">initData</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span><span class="na">base</span><span class="p">:</span> <span class="nx">base</span><span class="p">,</span> <span class="na">app</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">$scope</span><span class="p">})</span>
    <span class="p">}</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
      <span class="na">fail</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="na">data</span><span class="p">:</span> <span class="nx">data</span>
    <span class="p">})</span>
  <span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">cloud</span><span class="dl">'</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
    <span class="nx">that</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
      <span class="na">fail</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">})</span>
  <span class="p">})</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td> --><td class="rouge-code"><pre><span class="c1">// Markdownæ¸²æŸ“</span>
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
    <span class="p">{</span>
      <span class="nx">data</span> <span class="p">?</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">View</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="k">import</span> <span class="nx">src</span><span class="o">=</span><span class="dl">'</span><span class="s1">../towxml/entry.wxml</span><span class="dl">'</span> <span class="o">/&gt;</span>
          <span class="o">&lt;</span><span class="nx">template</span> <span class="nx">is</span><span class="o">=</span><span class="dl">'</span><span class="s1">entry</span><span class="dl">'</span> <span class="nx">data</span><span class="o">=</span><span class="dl">''</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>      <span class="p">)</span> <span class="p">:</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">className</span><span class="o">=</span><span class="dl">'</span><span class="s1">loading</span><span class="dl">'</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">AtActivityIndicator</span> <span class="nx">size</span><span class="o">=</span><span class="p">{</span><span class="mi">20</span><span class="p">}</span> <span class="nx">color</span><span class="o">=</span><span class="dl">'</span><span class="s1">#2d8cf0</span><span class="dl">'</span> <span class="nx">content</span><span class="o">=</span><span class="dl">'</span><span class="s1">loading...</span><span class="dl">'</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>      <span class="p">)</span>
    <span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>  <span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="redux">Redux</h2>

<p>å…¶å®ï¼Œç¬”è€…åœ¨è¯¥é¡¹ç›®ä¸­ï¼Œå¯¹Reduxçš„ä½¿ç”¨å¹¶ä¸å¤šã€‚ä¸€å¼€å§‹ï¼Œç¬”è€…è§‰å¾—æ‰€æœ‰çš„æ¥å£è¯·æ±‚éƒ½åº”è¯¥é€šè¿‡Reduxæ“ä½œï¼Œåé¢æ‰å‘ç°ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ“ä½œéƒ½å¿…é¡»ä½¿ç”¨Reduxï¼Œæœ€åï¼Œåœ¨æœ¬é¡¹ç›®ä¸­ï¼Œåªæœ‰è·å–ä¸ªäººä¿¡æ¯çš„æ—¶å€™ä½¿ç”¨äº†Reduxã€‚</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td> --><td class="rouge-code"><pre><span class="c1">// è·å–ä¸ªäººä¿¡æ¯</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">getUserInfo</span> <span class="o">=</span> <span class="nx">createApiAction</span><span class="p">(</span><span class="nx">USERINFO</span><span class="p">,</span> <span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">api</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/user</span><span class="dl">'</span><span class="p">,</span> <span class="nx">params</span><span class="p">))</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td> --><td class="rouge-code"><pre><span class="c1">// action</span>
<span class="k">export</span> <span class="kd">function</span> <span class="nx">createApiAction</span><span class="p">(</span><span class="nx">actionType</span><span class="p">,</span> <span class="nx">func</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="nx">params</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="nx">callback</span> <span class="o">=</span> <span class="p">{</span> <span class="na">success</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{},</span> <span class="na">failed</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{}</span> <span class="p">},</span>
    <span class="nx">customActionType</span> <span class="o">=</span> <span class="nx">actionType</span><span class="p">,</span>
  <span class="p">)</span> <span class="o">=&gt;</span> <span class="k">async</span> <span class="p">(</span><span class="nx">dispatch</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">customActionType</span>  <span class="p">}</span><span class="s2">_request`</span><span class="p">,</span> <span class="nx">params</span> <span class="p">});</span>
      <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">func</span><span class="p">(</span><span class="nx">params</span><span class="p">);</span>
      <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="nx">customActionType</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">data</span> <span class="p">});</span>

      <span class="nx">callback</span><span class="p">.</span><span class="nx">success</span> <span class="o">&amp;&amp;</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">success</span><span class="p">({</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">data</span> <span class="p">})</span>
      <span class="k">return</span> <span class="nx">data</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">dispatch</span><span class="p">({</span> <span class="na">type</span><span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">customActionType</span>  <span class="p">}</span><span class="s2">_failure`</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">e</span> <span class="p">})</span>

      <span class="nx">callback</span><span class="p">.</span><span class="nx">failed</span> <span class="o">&amp;&amp;</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">failed</span><span class="p">({</span> <span class="na">payload</span><span class="p">:</span> <span class="nx">e</span> <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td> --><td class="rouge-code"><pre><span class="nx">getUserInfo</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">hasLogin</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">userAction</span><span class="p">.</span><span class="nx">getUserInfo</span><span class="p">().</span><span class="nx">then</span><span class="p">(()</span><span class="o">=&gt;</span><span class="p">{</span>
      <span class="nx">Taro</span><span class="p">.</span><span class="nx">hideLoading</span><span class="p">()</span>
      <span class="nx">Taro</span><span class="p">.</span><span class="nx">stopPullDownRefresh</span><span class="p">()</span>
    <span class="p">})</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">Taro</span><span class="p">.</span><span class="nx">hideLoading</span><span class="p">()</span>
    <span class="nx">Taro</span><span class="p">.</span><span class="nx">stopPullDownRefresh</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kd">const</span> <span class="nx">mapStateToProps</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">ownProps</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="na">userInfo</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">userInfo</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">connect</span><span class="p">(</span><span class="nx">mapStateToProps</span><span class="p">)(</span><span class="nx">Index</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td> --><td class="rouge-code"><pre><span class="c1">// reducers</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">user</span> <span class="p">(</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">INITIAL_STATE</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nx">USERINFO</span><span class="p">:</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
        <span class="na">userInfo</span><span class="p">:</span> <span class="nx">action</span><span class="p">.</span><span class="nx">payload</span><span class="p">.</span><span class="nx">data</span>
      <span class="p">}</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="k">return</span> <span class="nx">state</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ç›®å‰ï¼Œç¬”è€…å¯¹Reduxè¿˜æ˜¯å¤„äºä¸€çŸ¥åŠè§£çš„çŠ¶æ€ï¼Œå—¯ï¼Œå­¦ä¹ çš„è·¯è¿˜å¾ˆé•¿ã€‚</p>

<blockquote>
  <p>æœ‰éœ€è¦çš„åŒå­¦å¯ä»¥å‰å¾€å¼€æºä»“åº“æŸ¥çœ‹ç›¸åº”çš„å®Œæ•´æºç ï¼Œè¿˜è¯·å¤šå¤šæŒ‡æ•™ã€‚</p>
</blockquote>

<h1 id="4-ç»“è¯­ç¯‡">4. ç»“è¯­ç¯‡</h1>

<p>å½“Gitterç¬¬ä¸€ä¸ªç‰ˆæœ¬é€šè¿‡å®¡æ ¸çš„æ—¶å€™ï¼Œå¿ƒæƒ…æ˜¯å¾ˆæ¿€åŠ¨çš„ï¼Œå°±åƒè‡ªå·±çš„å­©å­ä¸€æ ·ï¼Œçœ‹ç€ä»–ä¸€ç‚¹ä¸€ç‚¹çš„é•¿å¤§ï¼Œç¬”è€…ä¹Ÿå¾ˆäº«å—è¿™æ ·ä¸€ä¸ªé¡¹ç›®ä»æ— åˆ°æœ‰çš„è¿‡ç¨‹ï¼Œåœ¨æ­¤ï¼Œå¯¹é‚£äº›å¸®åŠ©è¿‡ç¬”è€…çš„äººä¸€å¹¶è¡¨ç¤ºæ„Ÿè°¢ã€‚</p>

<p>å½“ç„¶ï¼Œç›®å‰åŠŸèƒ½å’Œä½“éªŒä¸Šå¯èƒ½æœ‰äº›ä¸å¤§å®Œå–„ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶èƒ½æä¾›ä¸€äº›å®è´µçš„æ„è§ï¼ŒGitterèµ°å‘å®Œç¾çš„è·¯ä¸Šå¸Œæœ›æœ‰ä½ ï¼</p>

<p>æœ€åï¼Œå¸Œæœ›Gitterå°ç¨‹åºèƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼</p>
:ET